import { __extends } from "tslib";
import { ElementLabels, registerElementLabels } from '@antv/g2';
import _cloneDeep from '@antv/util/lib/clone';
import _each from '@antv/util/lib/each';
// import verticalShatter from '../../../../util/layout/verticalShatter';
var MARGIN = 10;
var LineElementLabels = /** @class */ (function (_super) {
    __extends(LineElementLabels, _super);
    function LineElementLabels() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LineElementLabels.prototype.showLabels = function (points, shapes) {
        var _this = this;
        var labelPoints = [];
        _each(shapes, function (shape) {
            var originData = shape.get('origin');
            var lastPoint = _cloneDeep(originData[originData.length - 1]);
            var bbox = shape.getBBox();
            lastPoint.x = bbox.maxX + MARGIN;
            labelPoints.push(lastPoint);
        });
        _super.prototype.showLabels.call(this, labelPoints, shapes);
        var renderer = this.get('labelsRenderer');
        var field = this.get('labelOptions').fields[0];
        var labels = renderer.get('group').get('children');
        var view = this.get('element').get('view');
        _each(labels, function (label) {
            label.attr('textAlign', 'left');
            label.attr('textBaseline', 'middle');
            var origin = label.get('origin');
            var shapeId = _this.get('element').getShapeId(origin);
            var color = _this._adjustColor(shapeId, shapes);
            label.attr('fill', color);
        });
        view.get('canvas').draw();
    };
    LineElementLabels.prototype._adjustColor = function (shapeId, shapes) {
        var color;
        _each(shapes, function (shape) {
            var id = shape.id;
            if (id === shapeId) {
                color = shape.attr('stroke');
            }
        });
        return color;
    };
    return LineElementLabels;
}(ElementLabels));
registerElementLabels('line', LineElementLabels);
//# sourceMappingURL=line-label.js.map