{"remainingRequest":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\graduateproject\\recruit\\recruit-web\\src\\view\\login\\loginBox.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\graduateproject\\recruit\\recruit-web\\src\\view\\login\\loginBox.vue","mtime":1682848612000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\nimport {\n  mapActions,\n  mapMutations\n} from 'vuex'\nimport User from '@/lin/model/user'\nimport Utils from '@/lin/util/util'\n\nexport default {\n  name: 'login',\n  props: {\n    show: Boolean\n  },\n  data() {\n    return {\n      direction: \"rtl\",\n      loading: false, // 加载动画\n      wait: 2000, // 2000ms之内不能重复发起请求\n      throttleLogin: null, // 节流登录\n      form: {\n        username: '',\n        password: '',\n      },\n    }\n  },\n  methods: {\n    onClose() {\n      this.form = {\n        username: '',\n        password: '',\n      }\n    },\n    close() {\n      this.show = false\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？')\n        .then(_ => {\n          done();\n          this.form = {\n            username: '',\n            password: '',\n          }\n          this.show = false\n        })\n        .catch(_ => { });\n    },\n    async login() {\n      const {\n        username,\n        password\n      } = this.form\n      try {\n        this.loading = true\n        await User.getToken(username, password)\n        await this.getInformation()\n        this.loading = false\n        this.$router.push('/about')\n        this.$message.success('登录成功')\n      } catch (e) {\n        this.loading = false\n        console.log(e)\n      }\n    },\n    async getInformation() {\n      try {\n        // 尝试获取当前用户信息\n        const user = await User.getPermissions()\n        this.setUserAndState(user)\n        this.setUserPermissions(user.permissions)\n      } catch (e) {\n        console.log(e)\n      }\n    },\n    ...mapActions(['setUserAndState']),\n    ...mapMutations({\n      setUserPermissions: 'SET_USER_PERMISSIONS',\n    }),\n  },\n  created() {\n    // 节流登录\n    this.throttleLogin = Utils.throttle(this.login, this.wait)\n  },\n  components: {},\n}\n",{"version":3,"sources":["loginBox.vue"],"names":[],"mappings":";AAmCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"loginBox.vue","sourceRoot":"src/view/login","sourcesContent":["<template>\n  <div>\n    <!-- <div class=\"team-name hidden-sm-and-down\"><img src=\"@/assets/image/login/team-name.png\" alt=\"logo\" /></div> -->\n    <el-drawer\n      title=\"校企招聘网\"\n      :visible.sync=\"show\"\n      :direction=\"direction\"\n      :before-close=\"handleClose\"\n    >\n      <div>\n        <!-- <div class=\"title\" style=\"margin-left: 350px\">\n        <h1 title=\"Lin\">校企招聘网</h1>\n        </div>-->\n        <form autocomplete=\"off\" @submit.prevent=\"throttleLogin()\">\n          <div class=\"form-item nickname\">\n            <span class=\"icon account-icon\"></span>\n            <input type=\"text\" v-model=\"form.username\" autocomplete=\"off\" placeholder=\"请填写用户名\" />\n          </div>\n          <div class=\"form-item password\">\n            <span class=\"icon secret-icon\"></span>\n            <input\n              type=\"password\"\n              v-model=\"form.password\"\n              autocomplete=\"off\"\n              placeholder=\"请填写用户登录密码\"\n            />\n          </div>\n          <button class=\"submit-btn\" type=\"submit\">登录</button>\n        </form>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport {\n  mapActions,\n  mapMutations\n} from 'vuex'\nimport User from '@/lin/model/user'\nimport Utils from '@/lin/util/util'\n\nexport default {\n  name: 'login',\n  props: {\n    show: Boolean\n  },\n  data() {\n    return {\n      direction: \"rtl\",\n      loading: false, // 加载动画\n      wait: 2000, // 2000ms之内不能重复发起请求\n      throttleLogin: null, // 节流登录\n      form: {\n        username: '',\n        password: '',\n      },\n    }\n  },\n  methods: {\n    onClose() {\n      this.form = {\n        username: '',\n        password: '',\n      }\n    },\n    close() {\n      this.show = false\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？')\n        .then(_ => {\n          done();\n          this.form = {\n            username: '',\n            password: '',\n          }\n          this.show = false\n        })\n        .catch(_ => { });\n    },\n    async login() {\n      const {\n        username,\n        password\n      } = this.form\n      try {\n        this.loading = true\n        await User.getToken(username, password)\n        await this.getInformation()\n        this.loading = false\n        this.$router.push('/about')\n        this.$message.success('登录成功')\n      } catch (e) {\n        this.loading = false\n        console.log(e)\n      }\n    },\n    async getInformation() {\n      try {\n        // 尝试获取当前用户信息\n        const user = await User.getPermissions()\n        this.setUserAndState(user)\n        this.setUserPermissions(user.permissions)\n      } catch (e) {\n        console.log(e)\n      }\n    },\n    ...mapActions(['setUserAndState']),\n    ...mapMutations({\n      setUserPermissions: 'SET_USER_PERMISSIONS',\n    }),\n  },\n  created() {\n    // 节流登录\n    this.throttleLogin = Utils.throttle(this.login, this.wait)\n  },\n  components: {},\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n"]}]}