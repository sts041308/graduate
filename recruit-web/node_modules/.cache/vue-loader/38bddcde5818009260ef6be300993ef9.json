{"remainingRequest":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\graduateproject\\recruit\\recruit-web\\src\\view\\resume\\detail.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\graduateproject\\recruit\\recruit-web\\src\\view\\resume\\detail.vue","mtime":1682848612000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\nimport Title from \"../../component/Title/index.vue\";\nimport Content from \"../../component/Content/index.vue\";\nimport moment from 'moment';\nimport exportPDF from './export-pdf'\nimport {\n  Resume\n} from '@/model/resume'\nexport default {\n  name: \"Detail\",\n  components: {\n    Title,\n    Content,\n  },\n  props: {\n    id: String,\n  },\n  watch: {\n    id(now, old) {\n      this.updataInfo(now)\n    }\n  },\n  data() {\n    return {\n      downloading: false,\n      model: \"p\",\n      // 基本信息\n      // 头像照片\n      avatar: \"\",\n      jobIntention: \"\",\n      name: \"\",\n      sex: \"\",\n      age: \"\",\n      english: \"\",\n      tel: \"1\",\n      email: \"\",\n      home: \"\",\n      // 教育经历\n      educations: [{\n        name: \"\",\n        start_time: \"\",\n        end_time: \"\",\n        major: \"\",\n        diploma: \"\",\n        descriptions: \"\",\n      },],\n      // 专业技能\n      ability: {\n        // 专业技能显示模式，ol为有序列表（前面是数字），ul为无序列表（前面是圆点），p为段落\n        skillsMode: 'p',\n        descriptions: \"\",\n      },\n      // 项目经历\n      projects: [{\n        name: \"\",\n        start_time: \"\",\n        end_time: \"\",\n        major: \"\",\n        // 项目背景显示模式，ol为有序列表（前面是数字），ul为无序列表（前面是圆点），p为段落\n        backgroundMode: 'ol',\n        background: '',\n        performance: \"\"\n      },],\n      // 实习经历\n      experiences: [{\n        name: \"\",\n        start_time: \"\",\n        end_time: \"\",\n        position: \"\",\n        performance: \"\",\n      },],\n      // 个人评价\n      evaluate: {\n        // 个人评价显示模式，ol为有序列表（前面是数字），ul为无序列表（前面是圆点），p为段落\n        wordMode: 'p',\n        word: ''\n      },\n      defaultImg: require(\"@/assets/image/user/user.png\")\n    };\n\n  },\n  async mounted() {\n    try {\n      if (this.id === null || this.id == '' || this.id == \"null\") return\n      const res = await Resume.getById(this.id)\n      // console.log(res)\n      this.ability.descriptions = res.ability,\n        this.avatar = res.avatar ? res.avatar : this.defaultImg,\n        this.educations = res.educations,\n        this.experiences = res.experiences,\n        this.projects = res.projects,\n        this.jobIntention = res.job_intention,\n        this.english = res.english,\n        this.name = res.name,\n        this.sex = res.sex === 0 ? \"男\" : \"女\",\n        this.evaluate.word = res.personal_summary,\n        this.tel = res.tel.substring(0, 3)+\"****\"+res.tel.substr(res.tel.length-4),\n        this.age = res.age,\n        this.email = res.email,\n        this.home = res.home\n\n    } catch (error) {\n      console.log(error)\n    } finally {\n      this.imageUrlToBase64()\n    }\n  },\n  created() { },\n  methods: {\n    imageUrlToBase64() {\n      //一定要设置为let，不然图片不显示\n      let image = new Image();\n      //解决跨域问题\n      image.setAttribute('crossOrigin', 'anonymous');\n      let imageUrl = this.avatar;\n      image.src = imageUrl\n      let that = this;\n      //image.onload为异步加载\n      image.onload = () => {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0, image.width, image.height);\n        var quality = 0.8;\n        //这里的dataurl就是base64类型\n        var dataURL = canvas.toDataURL(\"image/jpeg\", quality);//使用toDataUrl将图片转换成jpeg的格式,不要把图片压缩成png，因为压缩成png后base64的字符串可能比不转换前的长！\n        that.avatar = dataURL\n      }\n    },\n    exportPDF() {\n      try {\n        this.downloading = true\n        this.imageUrlToBase64()\n        exportPDF.exportPdf(\"downResume\", this.name + \"-\" + this.jobIntention)\n      } catch (err) {\n        this.$message.error(\"导出简历发生错误\")\n        this.downloading = false\n      } finally {\n        this.downloading = false;\n        this.$message.success(\"导出简历成功\")\n      }\n    },\n    changeDiploma(value) {\n      if (value == 0) return \"高中\"\n      else if (value == 1) return \"大学专科\"\n      else if (value == 2) return \"大学本科\"\n      else if (value == 3) return \"硕士研究生\"\n      else if (value == 4) return \"博士研究生\"\n      else return \"\"\n    },\n    dateformat(date) {\n      return moment(date).format(\"YYYY\")\n    },\n    monthformat(date) {\n      return moment(date).format(\"YYYY.MM\")\n    },\n    async updataInfo(nowid) {\n      try {\n        const res = await Resume.getById(nowid)//获取当前用户信息\n        // console.log(res)\n        this.ability.descriptions = res.ability,\n          this.avatar = 'http://localhost:5000/assets/'+res.avatar,//跨域问题用了5000端口代替\n          // console.log('当前图片路径'+this.avatar)\n          this.educations = res.educations,\n          this.experiences = res.experiences,\n          this.projects = res.projects,\n          this.jobIntention = res.job_intention,\n          this.english = res.english,\n          this.name = res.name,\n          this.sex = res.sex === 0 ? \"男\" : \"女\",\n          this.evaluate.word = res.personal_summary,\n          this.tel = res.tel,\n          this.age = res.age,\n          this.email = res.email,\n          this.home = res.home\n      } catch (error) {\n        console.log(error)\n      } finally { }\n    }\n  },\n};\n",{"version":3,"sources":["detail.vue"],"names":[],"mappings":";AA2JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/view/resume","sourcesContent":["<template>\n  <div>\n    <el-button round style=\"float:right\" type=\"success\" @click=\"exportPDF()\" v-loading=\"downloading\">导出简历</el-button>\n    <div class=\"index\" id=\"downResume\">\n      <div class=\"resume\">\n        <!-- 基本信息 -->\n        <div class=\"info\">\n          <div class=\"info_left_img\">\n            <el-avatar :size=\"120\"><img :src=\"avatar ? avatar : defaultImg\" size=\"120\" class=\"aa\"></el-avatar>\n<!--             <el-avatar :size=\"120\" :src=\"avatar\"></el-avatar>-->\n\n          </div>\n          <div class=\"info-right\">\n            <div class=\"info_name\">\n              <h1>{{ name }}</h1>\n              <span>{{ jobIntention }}</span>\n            </div>\n            <div class=\"info_other\">\n              <el-row :gutter=\"15\">\n                <el-form ref=\"resultForm\" size=\"medium\" label-width=\"100px\" label-position=\"left\">\n                  <el-col :span=\"8\">\n                    <el-form-item label-width=\"0\">\n                      <i class=\"el-icon-s-custom\"></i>\n                      {{ sex }} | {{ age }}\n                    </el-form-item>\n                  </el-col>\n                  <el-col :span=\"8\">\n                    <el-form-item label-width=\"0\" title=\"英语等级\">\n                      <i class=\"el-icon-star-off\"></i>\n                      {{ english }}\n                    </el-form-item>\n                  </el-col>\n                  <el-col :span=\"8\">\n                    <el-form-item label-width=\"0\" title=\"联系电话\">\n                      <i class=\"el-icon-phone\"></i>\n                      {{ tel }}\n                    </el-form-item>\n                  </el-col>\n                  <el-col :span=\"9\">\n                    <el-form-item label-width=\"0\" title=\"邮箱\">\n                      <i class=\"el-icon-message\"></i>\n                      {{ email }}\n                    </el-form-item>\n                  </el-col>\n                  <el-col :span=\"8\">\n                    <el-form-item label-width=\"0\"  title=\"居住地\">\n                      <i class=\"el-icon-s-home\"></i>\n                      {{ home }}\n                    </el-form-item>\n                  </el-col>\n                </el-form>\n              </el-row>\n            </div>\n          </div>\n        </div>\n\n        <!-- 教育经历 -->\n        <div class=\"education\">\n          <Title title=\"教育背景\" />\n          <div class=\"main\">\n            <div v-for=\"(item, index) in educations\" :key=\"index\">\n              <el-row :gutter=\"20\">\n                <el-col :span=\"6\">\n                  <span>{{ item.name }}</span>\n                </el-col>\n                <el-col :span=\"6\">\n                  <span>{{ item.major }}</span>\n                </el-col>\n                <el-col :span=\"5\">\n                  <span>{{ changeDiploma(item.diploma) }}</span>\n                </el-col>\n                <el-col :span=\"5\" :offset=\"2\" class=\"time\">\n                  <span>{{ monthformat(item.start_time) }}-{{ monthformat(item.end_time) }}</span>\n                </el-col>\n              </el-row>\n              <Content :data=\"item.descriptions\" />\n            </div>\n          </div>\n        </div>\n\n        <!-- 专业技能 -->\n        <div class=\"skill\">\n          <Title title=\"专业技能\" />\n          <div class=\"main\">\n            <Content :data=\"ability.descriptions\" :mode=\"model\" />\n          </div>\n        </div>\n\n        <!-- 实习经历 -->\n        <div class=\"internship\" v-if=\"experiences\">\n          <Title title=\"实习经历\" />\n          <div class=\"main\">\n            <div v-for=\"(experience, index) in experiences\" :key=\"index\">\n              <el-row :gutter=\"20\">\n                <el-col :span=\"10\">\n                  <span class=\"weight\">{{ experience.name }}</span>\n                </el-col>\n                <el-col :span=\"5\">\n                  <span>{{ experience.position }}</span>\n                </el-col>\n                <el-col :span=\"5\" :offset=\"4\" class=\"time\">\n                  <span>{{ monthformat(experience.start_time) }}-{{ monthformat(experience.end_time) }}</span>\n                </el-col>\n              </el-row>\n              <Content :data=\"experience.performance\" />\n            </div>\n          </div>\n        </div>\n\n        <!-- 项目经历 -->\n        <div class=\"projects\" v-if=\"projects\">\n          <Title title=\"项目经历\" />\n          <div class=\"main\">\n            <div v-for=\"(project, index) in projects\" :key=\"index\">\n              <el-row :gutter=\"20\">\n                <el-col :span=\"10\">\n                  <span class=\"project_name weight\">\n                    {{\n                        project.name\n                    }}\n                  </span>\n                </el-col>\n                <el-col :span=\"5\">\n                  <span>{{ project.position }}</span>\n                </el-col>\n                <el-col :span=\"5\" :offset=\"9\" class=\"time\">\n                  <span>{{ monthformat(project.start_time) }}-{{ monthformat(project.end_time) }}</span>\n                </el-col>\n                <!-- <el-col :span=\"24\">\n                <span class=\"weight\">项目地址：</span>\n                <span>{{ project.address }}</span>\n              </el-col>-->\n              </el-row>\n              <div class=\"weight\">项目背景：</div>\n              <Content :data=\"project.background\" :mode=\"project.backgroundMode\" />\n              <div class=\"weight\">项目描述：</div>\n              <Content :data=\"project.performance\" />\n            </div>\n          </div>\n        </div>\n\n        <!-- 个人评价 -->\n        <div class=\"evaluate\" v-if=\"evaluate\">\n          <Title title=\"个人评价\" />\n          <div class=\"main\">\n            <Content :data=\"evaluate.word\" :mode=\"evaluate.wordMode\" />\n            <Content :data=\"evaluate.descriptions\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Title from \"../../component/Title/index.vue\";\nimport Content from \"../../component/Content/index.vue\";\nimport moment from 'moment';\nimport exportPDF from './export-pdf'\nimport {\n  Resume\n} from '@/model/resume'\nexport default {\n  name: \"Detail\",\n  components: {\n    Title,\n    Content,\n  },\n  props: {\n    id: String,\n  },\n  watch: {\n    id(now, old) {\n      this.updataInfo(now)\n    }\n  },\n  data() {\n    return {\n      downloading: false,\n      model: \"p\",\n      // 基本信息\n      // 头像照片\n      avatar: \"\",\n      jobIntention: \"\",\n      name: \"\",\n      sex: \"\",\n      age: \"\",\n      english: \"\",\n      tel: \"1\",\n      email: \"\",\n      home: \"\",\n      // 教育经历\n      educations: [{\n        name: \"\",\n        start_time: \"\",\n        end_time: \"\",\n        major: \"\",\n        diploma: \"\",\n        descriptions: \"\",\n      },],\n      // 专业技能\n      ability: {\n        // 专业技能显示模式，ol为有序列表（前面是数字），ul为无序列表（前面是圆点），p为段落\n        skillsMode: 'p',\n        descriptions: \"\",\n      },\n      // 项目经历\n      projects: [{\n        name: \"\",\n        start_time: \"\",\n        end_time: \"\",\n        major: \"\",\n        // 项目背景显示模式，ol为有序列表（前面是数字），ul为无序列表（前面是圆点），p为段落\n        backgroundMode: 'ol',\n        background: '',\n        performance: \"\"\n      },],\n      // 实习经历\n      experiences: [{\n        name: \"\",\n        start_time: \"\",\n        end_time: \"\",\n        position: \"\",\n        performance: \"\",\n      },],\n      // 个人评价\n      evaluate: {\n        // 个人评价显示模式，ol为有序列表（前面是数字），ul为无序列表（前面是圆点），p为段落\n        wordMode: 'p',\n        word: ''\n      },\n      defaultImg: require(\"@/assets/image/user/user.png\")\n    };\n\n  },\n  async mounted() {\n    try {\n      if (this.id === null || this.id == '' || this.id == \"null\") return\n      const res = await Resume.getById(this.id)\n      // console.log(res)\n      this.ability.descriptions = res.ability,\n        this.avatar = res.avatar ? res.avatar : this.defaultImg,\n        this.educations = res.educations,\n        this.experiences = res.experiences,\n        this.projects = res.projects,\n        this.jobIntention = res.job_intention,\n        this.english = res.english,\n        this.name = res.name,\n        this.sex = res.sex === 0 ? \"男\" : \"女\",\n        this.evaluate.word = res.personal_summary,\n        this.tel = res.tel.substring(0, 3)+\"****\"+res.tel.substr(res.tel.length-4),\n        this.age = res.age,\n        this.email = res.email,\n        this.home = res.home\n\n    } catch (error) {\n      console.log(error)\n    } finally {\n      this.imageUrlToBase64()\n    }\n  },\n  created() { },\n  methods: {\n    imageUrlToBase64() {\n      //一定要设置为let，不然图片不显示\n      let image = new Image();\n      //解决跨域问题\n      image.setAttribute('crossOrigin', 'anonymous');\n      let imageUrl = this.avatar;\n      image.src = imageUrl\n      let that = this;\n      //image.onload为异步加载\n      image.onload = () => {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0, image.width, image.height);\n        var quality = 0.8;\n        //这里的dataurl就是base64类型\n        var dataURL = canvas.toDataURL(\"image/jpeg\", quality);//使用toDataUrl将图片转换成jpeg的格式,不要把图片压缩成png，因为压缩成png后base64的字符串可能比不转换前的长！\n        that.avatar = dataURL\n      }\n    },\n    exportPDF() {\n      try {\n        this.downloading = true\n        this.imageUrlToBase64()\n        exportPDF.exportPdf(\"downResume\", this.name + \"-\" + this.jobIntention)\n      } catch (err) {\n        this.$message.error(\"导出简历发生错误\")\n        this.downloading = false\n      } finally {\n        this.downloading = false;\n        this.$message.success(\"导出简历成功\")\n      }\n    },\n    changeDiploma(value) {\n      if (value == 0) return \"高中\"\n      else if (value == 1) return \"大学专科\"\n      else if (value == 2) return \"大学本科\"\n      else if (value == 3) return \"硕士研究生\"\n      else if (value == 4) return \"博士研究生\"\n      else return \"\"\n    },\n    dateformat(date) {\n      return moment(date).format(\"YYYY\")\n    },\n    monthformat(date) {\n      return moment(date).format(\"YYYY.MM\")\n    },\n    async updataInfo(nowid) {\n      try {\n        const res = await Resume.getById(nowid)//获取当前用户信息\n        // console.log(res)\n        this.ability.descriptions = res.ability,\n          this.avatar = 'http://localhost:5000/assets/'+res.avatar,//跨域问题用了5000端口代替\n          // console.log('当前图片路径'+this.avatar)\n          this.educations = res.educations,\n          this.experiences = res.experiences,\n          this.projects = res.projects,\n          this.jobIntention = res.job_intention,\n          this.english = res.english,\n          this.name = res.name,\n          this.sex = res.sex === 0 ? \"男\" : \"女\",\n          this.evaluate.word = res.personal_summary,\n          this.tel = res.tel,\n          this.age = res.age,\n          this.email = res.email,\n          this.home = res.home\n      } catch (error) {\n        console.log(error)\n      } finally { }\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.aa {\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.aa img {\n  position: relative;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  margin: 0 auto;\n  height: 100%;\n}\n\n.index {\n  margin: 20px auto;\n\n  .resume {\n    width: 820px;\n    margin: 0 auto;\n    padding: 20px 20px;\n    box-shadow: 0px 3px 10px 5px #e9e9e9;\n    border-radius: 10px;\n    line-height: 28px;\n\n    .weight {\n      font-weight: 500;\n    }\n\n    .main {\n      padding: 20px 12px 30px 12px;\n    }\n\n    .time {\n      span {\n        color: #a8a8a8;\n      }\n    }\n\n    .info {\n      margin-bottom: 0px;\n    }\n\n    .info {\n      display: flex;\n      align-items: center;\n\n      .info_left_img {\n        ::v-deep img {\n          width: 100%;\n        }\n      }\n\n      .info-right {\n        margin-left: 50px;\n      }\n\n      &_name {\n        line-height: 80px;\n        display: flex;\n\n        h1 {\n          font-size: 32px;\n        }\n\n        span {\n          margin-left: 15px;\n          font-size: 14px;\n        }\n      }\n\n      &_other {\n        ::v-deep .el-descriptions__cell {\n          padding-right: 35px;\n        }\n\n        i {\n          color: #c0c4cc;\n          font-size: 15px;\n          margin-right: 10px;\n        }\n      }\n    }\n\n    .project {\n      .project_name {\n        letter-spacing: 1px;\n        font-size: 16px;\n      }\n    }\n  }\n}\n</style>\n"]}]}