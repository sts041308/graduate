{"remainingRequest":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\graduateproject\\recruit\\recruit-web\\src\\component\\layout\\nav-bar.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\graduateproject\\recruit\\recruit-web\\src\\component\\layout\\nav-bar.vue","mtime":1682848612000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\nimport Breadcrumb from './breadcrumb'\nimport Screenfull from './screen-full'\nimport User from './user'\nimport ClearTab from './clear-tab'\nimport { Notify } from '@/model/notify'\nimport moment from 'moment'\n\nexport default {\n  name: 'NavBar',\n  created() {\n    this.readMessages()\n  },\n  // watch: {\n  //   messages: {\n  //     handler() {\n  //       this.value = this.messages.filter(msg => msg.is_read === false).length\n  //       if (this.value === 0) {\n  //         this.hidden = true\n  //       } else {\n  //         this.hidden = false\n  //       }\n  //     },\n  //     immediate: true,\n  //   },\n  // },\n  data() {\n    return {\n      value: 0,\n      hidden: true,\n      item: {\n        content: \"\",\n        id: '',\n        is_read: \"\",\n        time: \"\",\n        user_name: \"\"\n      },\n      messages: [],\n    }\n  },\n  methods: {\n    // 查看全部已读信息\n    async readAll() {\n      // 查看全部已读消息之前，会把全部未读消息状态修改为已读\n      await Notify.update(this.$store.getters.user.nickame)\n      const res = await Notify.get(this.$store.getters.user.nickname, \"true\")\n      this.messages = res\n      this.formateDate(this.messages)\n    },\n    // 查看全部信息\n    async viewAll() {\n      const res = await Notify.getAll(this.$store.getters.user.nickname)\n      this.messages = res\n      this.formateDate(this.messages)\n    },\n    // 查看未读信息\n    async readMessages() {\n      const res = await Notify.get(this.$store.getters.user.nickname, \"false\")\n      if (res==null) return;\n      this.messages = res\n      this.formateDate(this.messages)\n    },\n    formateDate(item) {\n      for (var i = 0; i < item.length; i++) {\n        item[i].time = moment(item[i].time).format(\"YYYY-MM-DD hh:mm:ss\")\n      }\n    },\n    \n  },\n  components: {\n    Breadcrumb,\n    User,\n    Screenfull,\n    ClearTab,\n  },\n}\n",{"version":3,"sources":["nav-bar.vue"],"names":[],"mappings":";AA0BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"nav-bar.vue","sourceRoot":"src/component/layout","sourcesContent":["<template>\n  <div class=\"app-nav-bar\">\n    <div class=\"nav-content\">\n      <breadcrumb />\n      <div class=\"right-info\">\n        <router-link to=\"/index\">返回首页&nbsp;&nbsp;&nbsp;</router-link>\n        <lin-notify\n          height=\"370\"\n          @readMessages=\"readMessages\"\n          :trigger=\"'click'\"\n          :messages=\"messages\"\n          @readAll=\"readAll\"\n          @viewAll=\"viewAll\"\n          class=\"lin-notify\"\n          :value=\"value\"\n          :hidden=\"hidden\"\n        ></lin-notify>\n        <clear-tab></clear-tab>\n        <screenfull />\n        <user></user>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Breadcrumb from './breadcrumb'\nimport Screenfull from './screen-full'\nimport User from './user'\nimport ClearTab from './clear-tab'\nimport { Notify } from '@/model/notify'\nimport moment from 'moment'\n\nexport default {\n  name: 'NavBar',\n  created() {\n    this.readMessages()\n  },\n  // watch: {\n  //   messages: {\n  //     handler() {\n  //       this.value = this.messages.filter(msg => msg.is_read === false).length\n  //       if (this.value === 0) {\n  //         this.hidden = true\n  //       } else {\n  //         this.hidden = false\n  //       }\n  //     },\n  //     immediate: true,\n  //   },\n  // },\n  data() {\n    return {\n      value: 0,\n      hidden: true,\n      item: {\n        content: \"\",\n        id: '',\n        is_read: \"\",\n        time: \"\",\n        user_name: \"\"\n      },\n      messages: [],\n    }\n  },\n  methods: {\n    // 查看全部已读信息\n    async readAll() {\n      // 查看全部已读消息之前，会把全部未读消息状态修改为已读\n      await Notify.update(this.$store.getters.user.nickame)\n      const res = await Notify.get(this.$store.getters.user.nickname, \"true\")\n      this.messages = res\n      this.formateDate(this.messages)\n    },\n    // 查看全部信息\n    async viewAll() {\n      const res = await Notify.getAll(this.$store.getters.user.nickname)\n      this.messages = res\n      this.formateDate(this.messages)\n    },\n    // 查看未读信息\n    async readMessages() {\n      const res = await Notify.get(this.$store.getters.user.nickname, \"false\")\n      if (res==null) return;\n      this.messages = res\n      this.formateDate(this.messages)\n    },\n    formateDate(item) {\n      for (var i = 0; i < item.length; i++) {\n        item[i].time = moment(item[i].time).format(\"YYYY-MM-DD hh:mm:ss\")\n      }\n    },\n    \n  },\n  components: {\n    Breadcrumb,\n    User,\n    Screenfull,\n    ClearTab,\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.lin-notify {\n  margin-right: 20px;\n}\n.app-nav-bar {\n  width: 100%;\n  height: $navbar-height;\n  display: flex;\n  align-items: center;\n  .logo.js-min-logo {\n    width: 64px;\n    font-size: 16px;\n    color: #fff;\n  }\n  .nav-content {\n    flex: 1;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-left: 10px;\n    padding-right: $navbar-padding;\n    .right-info {\n      display: flex;\n      align-items: center;\n    }\n  }\n}\n\n</style>\n"]}]}