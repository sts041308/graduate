{"remainingRequest":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\babel-loader\\lib\\index.js!E:\\graduateproject\\recruit\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\graduateproject\\recruit\\recruit-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\graduateproject\\recruit\\recruit-web\\src\\component\\base\\table\\lin-table.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\graduateproject\\recruit\\recruit-web\\src\\component\\base\\table\\lin-table.vue","mtime":1682848612000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\babel.config.js","mtime":1682848612000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\graduateproject\\recruit\\recruit-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n// import Sortable from 'sortablejs'\n// import FileSaver from 'file-saver'\n\nexport default {\n  props: {\n    tableColumn: {\n      // 表头名称\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    tableData: {\n      // 表格数据\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    operate: {\n      // 自定义按键及绑定方法\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    customColumn: {\n      // 定制要展示的列\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    fixedLeftList: {\n      // 左侧固定列\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    fixedRightList: {\n      // 右侧固定列\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    type: {\n      // 是否开启表格多选\n      type: String,\n      default: null\n    },\n    index: {\n      // 是否显示索引\n      index: String,\n      default: ''\n    },\n    highlightCurrentRow: {\n      // 是否开启表格单选\n      type: Boolean,\n      default: false\n    },\n    loading: {\n      // 动画加载\n      type: Boolean,\n      default: false\n    },\n    loadingText: {\n      // 动画提示\n      type: String,\n      default: ''\n    },\n    loadingIcon: {\n      // 动画图标\n      type: String,\n      default: 'el-icon-loading'\n    },\n    loadingBG: {\n      // 动画背景色\n      type: String,\n      default: 'rgba(255,255,255,0.5)'\n    },\n    pagination: {\n      // 分页\n      type: [Object, Boolean],\n      default: false\n    },\n    border: {\n      // 边框\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      filterTableColumn: [],\n      // 定制展示的列\n      currentPage: 1,\n      // 当前选中页\n      currentData: [],\n      // 每次切换页码的时候要给table传入不同的数据\n      selectedTableData: [],\n      // 多选选中的数据\n      currentRow: null,\n      // 单选选中的数据\n      oldVal: [],\n      // 上一次选中的数据\n      oldKey: [],\n      // 上一次选中数据的key\n      currentIndex: 1,\n      // 当前索引，切换页面的时候需要重新计算\n      rowClassName: '' // 行样式\n    };\n  },\n  created: function created() {},\n  beforeMount: function beforeMount() {\n    // 先放在session里，因为每次切换页码table都会重新渲染，之前选中都数据就丢失了  sessionstorage在create里面打包会提示undefined\n    sessionStorage.setItem('selectedTableData', JSON.stringify([]));\n  },\n  methods: {\n    // 开发者自定义的函数\n    buttonMethods: function buttonMethods(func, index, row) {\n      var _this = this;\n      var methods = this.$options.methods;\n      methods[func](_this, index, row);\n    },\n    // 行内编辑\n    handleEdit: function handleEdit(_this, index, row) {\n      _this.$emit('handleEdit', {\n        index: index,\n        row: row\n      });\n    },\n    // 行内删除\n    handleDelete: function handleDelete(_this, index, row) {\n      _this.$emit('handleDelete', {\n        index: index,\n        row: row\n      });\n    },\n    // 行内跳转页面\n    goToGroupEditPage: function goToGroupEditPage(_this, index, row) {\n      _this.$emit('goToGroupEditPage', {\n        index: index,\n        row: row\n      });\n    },\n    // 多选-选中checkbox\n    toggleSelection: function toggleSelection(rows, flag) {\n      var _this2 = this;\n      if (rows) {\n        rows.forEach(function (row) {\n          _this2.$refs.linTable.toggleRowSelection(row, flag);\n        });\n      } else {\n        this.$refs.linTable.clearSelection();\n      }\n    },\n    // 全选-取消全选\n    selectAll: function selectAll(val) {\n      this.oldKey = val.map(function (item) {\n        return item.key;\n      });\n    },\n    // 单选\n    handleCurrentChange: function handleCurrentChange(val, oldVal) {\n      this.currentRow = val;\n      this.$emit('handleCurrentChange', {\n        val: val,\n        oldVal: oldVal\n      });\n    },\n    // 单击某一行\n    rowClick: function rowClick(row) {\n      // eslint-disable-line\n      // 选中-多选\n      if (!this.oldKey.includes(row.key)) {\n        this.oldKey.push(row.key);\n        var data = this.oldVal.concat(row);\n        this.handleSelectionChange(data);\n        // 选中checkbox\n        this.toggleSelection(this.currentData.filter(function (item) {\n          return item.key === row.key;\n        }));\n        // 取消选中\n      } else {\n        this.oldKey = this.oldKey.filter(function (item) {\n          return item !== row.key;\n        });\n        var _data = this.oldVal.filter(function (item) {\n          return item.key !== row.key;\n        });\n        this.handleSelectionChange(_data);\n        this.toggleSelection(this.currentData.filter(function (item) {\n          return item.key === row.key;\n        }), false);\n      }\n      // 选中-单选\n      if (this.currentOldRow && this.currentOldRow.key === row.key) {\n        // 取消单选选中\n        this.$refs.linTable.setCurrentRow();\n        this.currentOldRow = null;\n        return;\n      }\n      this.currentOldRow = row;\n    },\n    // 切换当前页\n    currentChange: function currentChange(page) {\n      var _this3 = this;\n      var currentSelectedData = [];\n      this.oldVal = [];\n      this.currentPage = page;\n      this.selectedTableData = JSON.parse(sessionStorage.getItem('selectedTableData'));\n      this.currentData = this.tableData.filter(function (item, index) {\n        return index >= (_this3.currentPage - 1) * _this3.pagination.pageSize && index < _this3.currentPage * _this3.pagination.pageSize;\n      }); // eslint-disable-line\n      this.$emit('currentChange', page);\n      // 已选中的数据打勾\n      this.selectedTableData.forEach(function (item) {\n        for (var i = 0; i < _this3.currentData.length; i++) {\n          if (_this3.currentData[i].key === item.key) {\n            // 切换页码重新计算oldVal\n            _this3.oldVal.push(_this3.currentData[i]);\n            // 需要打勾的数据\n            currentSelectedData.push(_this3.currentData[i]);\n          }\n        }\n      });\n      this.$nextTick(function () {\n        _this3.toggleSelection(currentSelectedData);\n      });\n      // 切换行索引\n      this.currentIndex = (this.currentPage - 1) * this.pagination.pageSize + 1;\n    },\n    // checkbox触发函数\n    handleSelectionChange: function handleSelectionChange(val) {\n      var valKeys = val.map(function (item) {\n        return item.key;\n      });\n      var oldValKeys = this.oldVal.map(function (item) {\n        return item.key;\n      });\n      this.selectedTableData = JSON.parse(sessionStorage.getItem('selectedTableData'));\n      // 一条数据都没选中\n      if (this.selectedTableData.length === 0) {\n        this.selectedTableData = this.selectedTableData.concat(val);\n        this.$emit('selection-change', this.selectedTableData);\n        this.oldVal = _toConsumableArray(val);\n        sessionStorage.setItem('selectedTableData', JSON.stringify(this.selectedTableData));\n        return;\n      }\n      // 判断是选中数据还是取消选中\n      if (valKeys.length < oldValKeys.length) {\n        var delKey = oldValKeys.filter(function (item) {\n          return !valKeys.includes(item);\n        });\n        this.selectedTableData = this.selectedTableData.filter(function (item) {\n          return !delKey.includes(item.key);\n        });\n        this.$emit('selection-change', this.selectedTableData);\n      } else {\n        var addKey = valKeys.filter(function (item) {\n          return !oldValKeys.includes(item);\n        });\n        var addVal = val.filter(function (item) {\n          return addKey.includes(item.key);\n        });\n        this.selectedTableData = this.selectedTableData.concat(addVal);\n        this.$emit('selection-change', this.selectedTableData);\n      }\n      sessionStorage.setItem('selectedTableData', JSON.stringify(this.selectedTableData));\n      this.oldVal = _toConsumableArray(val);\n    } // 拖拽\n    // setDrag() {\n    //   const el = document.querySelectorAll('.el-table__body-wrapper > table > tbody')[0]\n    //   this.rowClassName = 'rowClassName' // 设置行样式，添加移动手势\n    //   this.sortable = Sortable.create(el, {\n    //     setData(dataTransfer) {\n    //       dataTransfer.setData('Text', '')\n    //     },\n    //     onEnd: (evt) => {\n    //       const dragData = [...this.currentData]\n    //       let { oldIndex, newIndex } = evt\n    //       if (this.pagination) {\n    //         oldIndex = evt.oldIndex * this.currentPage\n    //         newIndex = evt.newIndex * this.currentPage\n    //       }\n    //       dragData[oldIndex] = this.currentData[newIndex]\n    //       dragData[newIndex] = this.currentData[oldIndex]\n    //       this.$emit('getDragData', { dragData, oldIndex, newIndex })\n    //     },\n    //   })\n    // },\n    // 导出excel\n    // exportExcel(fileName = 'sheet') {\n    //   const targetTable = this.$XLSX.utils.table_to_book(document.querySelectorAll('.el-table__body-wrapper > table')[0])\n    //   const writeTable = this.$XLSX.write(targetTable, { bookType: 'xlsx', bookSST: true, type: 'array' })\n    //   try {\n    //     FileSaver.saveAs(new Blob([writeTable], { type: 'application/octet-stream' }), `${fileName}.xlsx`)\n    //   } catch (e) { if (typeof console !== 'undefined') console.log(e, writeTable) }\n    //   return writeTable\n    // },\n    // 导出csv\n    // exportCsv(fileName = 'sheet') {\n    //   const targetTable = this.$XLSX.utils.table_to_book(document.querySelectorAll('.el-table__body-wrapper > table')[0])\n    //   const writeTable = this.$XLSX.write(targetTable, { bookType: 'csv', bookSST: true, type: 'array' })\n    //   try {\n    //     FileSaver.saveAs(new Blob([writeTable], { type: 'application/octet-stream' }), `${fileName}.csv`)\n    //   } catch (e) { if (typeof console !== 'undefined') console.log(e, writeTable) }\n    //   return writeTable\n    // },\n  },\n  watch: {\n    fixedLeftList: {\n      handler: function handler() {\n        var _this4 = this;\n        // eslint-disable-line\n        this.filterTableColumn.map(function (item, index) {\n          if (_this4.fixedLeftList.indexOf(item.label) > -1) {\n            _this4.$set(_this4.filterTableColumn[index], 'fixed', 'left');\n          } else if (_this4.fixedRightList.indexOf(item.label) === -1) {\n            _this4.$set(_this4.filterTableColumn[index], 'fixed', false);\n          }\n          return '';\n        });\n      },\n      deep: true,\n      immediate: true\n    },\n    fixedRightList: {\n      handler: function handler() {\n        var _this5 = this;\n        // eslint-disable-line\n        this.filterTableColumn.map(function (item, index) {\n          if (_this5.fixedRightList.indexOf(item.label) > -1) {\n            _this5.$set(_this5.filterTableColumn[index], 'fixed', 'right');\n          } else if (_this5.fixedLeftList.indexOf(item.label) === -1) {\n            _this5.$set(_this5.filterTableColumn[index], 'fixed', false);\n          }\n          return '';\n        });\n      },\n      deep: true,\n      immediate: true\n    },\n    customColumn: {\n      handler: function handler(val) {\n        if (val.length > 1) {\n          this.filterTableColumn = this.tableColumn.filter(function (v) {\n            return val.indexOf(v.label) > -1;\n          });\n        }\n      },\n      deep: true\n    },\n    tableData: {\n      handler: function handler() {\n        var _this6 = this;\n        // 传了分页配置\n        if (this.pagination && this.pagination.pageSize) {\n          this.currentData = this.tableData.filter(function (item, index) {\n            return index < _this6.pagination.pageSize;\n          });\n        } else {\n          this.currentData = this.tableData;\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    tableColumn: {\n      handler: function handler() {\n        var _this7 = this;\n        // 如果一开始没有传要展示的列 就默认全展示\n        if (this.customColumn.length > 1) {\n          this.filterTableColumn = this.tableColumn.filter(function (v) {\n            return _this7.customColumn.indexOf(v.label) > -1;\n          });\n        } else {\n          this.filterTableColumn = this.tableColumn;\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  }\n};",{"version":3,"names":["props","tableColumn","type","Array","default","_default","tableData","operate","customColumn","fixedLeftList","fixedRightList","String","index","highlightCurrentRow","Boolean","loading","loadingText","loadingIcon","loadingBG","pagination","Object","border","data","filterTableColumn","currentPage","currentData","selectedTableData","currentRow","oldVal","oldKey","currentIndex","rowClassName","created","beforeMount","sessionStorage","setItem","JSON","stringify","methods","buttonMethods","func","row","_this","$options","handleEdit","$emit","handleDelete","goToGroupEditPage","toggleSelection","rows","flag","_this2","forEach","$refs","linTable","toggleRowSelection","clearSelection","selectAll","val","map","item","key","handleCurrentChange","rowClick","includes","push","concat","handleSelectionChange","filter","currentOldRow","setCurrentRow","currentChange","page","_this3","currentSelectedData","parse","getItem","pageSize","i","length","$nextTick","valKeys","oldValKeys","_toConsumableArray","delKey","addKey","addVal","watch","handler","_this4","indexOf","label","$set","deep","immediate","_this5","v","_this6","_this7"],"sources":["src/component/base/table/lin-table.vue"],"sourcesContent":["<template>\n  <div class=\"lin-table\">\n    <el-table\n      ref=\"linTable\"\n      v-loading=\"loading\"\n      stripe\n      row-key=\"id\"\n      :border=\"border\"\n      :data=\"currentData\"\n      :highlight-current-row=\"highlightCurrentRow ? true : false\"\n      :element-loading-text=\"loadingText\"\n      :element-loading-spinner=\"loadingIcon\"\n      :element-loading-background=\"loadingBG\"\n      :row-class-name=\"rowClassName\"\n      @current-change=\"handleCurrentChange\"\n      @selection-change=\"handleSelectionChange\"\n      @select-all=\"selectAll\"\n      @row-click=\"rowClick\"\n    >\n      <el-table-column v-if=\"type\" :type=\"type\" width=\"55\"></el-table-column>\n      <el-table-column v-if=\"index\" :type=\"index\" :index=\"currentIndex\" width=\"55\"></el-table-column>\n      <el-table-column\n        v-for=\"item in filterTableColumn\"\n        :key=\"item.id\"\n        :prop=\"item.prop\"\n        :label=\"item.label\"\n        :show-overflow-tooltip=\"true\"\n        :filters=\"item.filters ? item.filters : null\"\n        :filter-method=\"item.filterMethod ? item.filterMethod : null\"\n        :column-key=\"item.filterMethod ? item.prop : null\"\n        :formatter=\"item.formatter ? item.formatter : null\"\n        :sortable=\"item.sortable ? item.sortable : false\"\n        :fixed=\"item.fixed ? item.fixed : false\"\n        :width=\"item.width ? item.width : ''\"\n      ></el-table-column>\n      <el-table-column v-if=\"operate.length > 0\" label=\"操作\" fixed=\"right\" width=\"275\">\n        <template slot-scope=\"scope\">\n          <el-button\n            v-for=\"(item, index) in operate\"\n            :type=\"item.type\"\n            plain\n            :key=\"index\"\n            size=\"mini\"\n            v-permission=\"{ permission: item.permission ? item.permission : '', type: 'disabled' }\"\n            @click.native.prevent.stop=\"buttonMethods(item.func, scope.$index, scope.row)\"\n          >{{ item.name }}</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      class=\"pagination\"\n      v-if=\"pagination\"\n      background\n      layout=\"prev, pager, next\"\n      :page-size=\"pagination.pageSize ? pagination.pageSize : 10\"\n      :total=\"pagination.pageTotal ? pagination.pageTotal : null\"\n      :current-page=\"pagination.currentPage ? pagination.currentPage : 1\"\n      @current-change=\"currentChange\"\n    ></el-pagination>\n  </div>\n</template>\n\n<script>\n// import Sortable from 'sortablejs'\n// import FileSaver from 'file-saver'\n\nexport default {\n  props: {\n    tableColumn: {\n      // 表头名称\n      type: Array,\n      default: () => [],\n    },\n    tableData: {\n      // 表格数据\n      type: Array,\n      default: () => [],\n    },\n    operate: {\n      // 自定义按键及绑定方法\n      type: Array,\n      default: () => [],\n    },\n    customColumn: {\n      // 定制要展示的列\n      type: Array,\n      default: () => [],\n    },\n    fixedLeftList: {\n      // 左侧固定列\n      type: Array,\n      default: () => [],\n    },\n    fixedRightList: {\n      // 右侧固定列\n      type: Array,\n      default: () => [],\n    },\n    type: {\n      // 是否开启表格多选\n      type: String,\n      default: null,\n    },\n    index: {\n      // 是否显示索引\n      index: String,\n      default: '',\n    },\n    highlightCurrentRow: {\n      // 是否开启表格单选\n      type: Boolean,\n      default: false,\n    },\n    loading: {\n      // 动画加载\n      type: Boolean,\n      default: false,\n    },\n    loadingText: {\n      // 动画提示\n      type: String,\n      default: '',\n    },\n    loadingIcon: {\n      // 动画图标\n      type: String,\n      default: 'el-icon-loading',\n    },\n    loadingBG: {\n      // 动画背景色\n      type: String,\n      default: 'rgba(255,255,255,0.5)',\n    },\n    pagination: {\n      // 分页\n      type: [Object, Boolean],\n      default: false,\n    },\n    border: {\n      // 边框\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      filterTableColumn: [], // 定制展示的列\n      currentPage: 1, // 当前选中页\n      currentData: [], // 每次切换页码的时候要给table传入不同的数据\n      selectedTableData: [], // 多选选中的数据\n      currentRow: null, // 单选选中的数据\n      oldVal: [], // 上一次选中的数据\n      oldKey: [], // 上一次选中数据的key\n      currentIndex: 1, // 当前索引，切换页面的时候需要重新计算\n      rowClassName: '', // 行样式\n    }\n  },\n  created() { },\n  beforeMount() {\n    // 先放在session里，因为每次切换页码table都会重新渲染，之前选中都数据就丢失了  sessionstorage在create里面打包会提示undefined\n    sessionStorage.setItem('selectedTableData', JSON.stringify([]))\n  },\n  methods: {\n    // 开发者自定义的函数\n    buttonMethods(func, index, row) {\n      const _this = this\n      const { methods } = this.$options\n      methods[func](_this, index, row)\n    },\n    // 行内编辑\n    handleEdit(_this, index, row) {\n      _this.$emit('handleEdit', { index, row })\n    },\n    // 行内删除\n    handleDelete(_this, index, row) {\n      _this.$emit('handleDelete', { index, row })\n    },\n    // 行内跳转页面\n    goToGroupEditPage(_this, index, row) {\n      _this.$emit('goToGroupEditPage', { index, row })\n    },\n    // 多选-选中checkbox\n    toggleSelection(rows, flag) {\n      if (rows) {\n        rows.forEach(row => {\n          this.$refs.linTable.toggleRowSelection(row, flag)\n        })\n      } else {\n        this.$refs.linTable.clearSelection()\n      }\n    },\n    // 全选-取消全选\n    selectAll(val) {\n      this.oldKey = val.map(item => item.key)\n    },\n    // 单选\n    handleCurrentChange(val, oldVal) {\n      this.currentRow = val\n      this.$emit('handleCurrentChange', { val, oldVal })\n    },\n    // 单击某一行\n    rowClick(row) {\n      // eslint-disable-line\n      // 选中-多选\n      if (!this.oldKey.includes(row.key)) {\n        this.oldKey.push(row.key)\n        const data = this.oldVal.concat(row)\n        this.handleSelectionChange(data)\n        // 选中checkbox\n        this.toggleSelection(this.currentData.filter(item => item.key === row.key))\n        // 取消选中\n      } else {\n        this.oldKey = this.oldKey.filter(item => item !== row.key)\n        const data = this.oldVal.filter(item => item.key !== row.key)\n        this.handleSelectionChange(data)\n        this.toggleSelection(\n          this.currentData.filter(item => item.key === row.key),\n          false,\n        )\n      }\n      // 选中-单选\n      if (this.currentOldRow && this.currentOldRow.key === row.key) {\n        // 取消单选选中\n        this.$refs.linTable.setCurrentRow()\n        this.currentOldRow = null\n        return\n      }\n      this.currentOldRow = row\n    },\n    // 切换当前页\n    currentChange(page) {\n      const currentSelectedData = []\n      this.oldVal = []\n      this.currentPage = page\n      this.selectedTableData = JSON.parse(sessionStorage.getItem('selectedTableData'))\n      this.currentData = this.tableData.filter(\n        (item, index) => index >= (this.currentPage - 1) * this.pagination.pageSize\n          && index < this.currentPage * this.pagination.pageSize,\n      ) // eslint-disable-line\n      this.$emit('currentChange', page)\n      // 已选中的数据打勾\n      this.selectedTableData.forEach(item => {\n        for (let i = 0; i < this.currentData.length; i++) {\n          if (this.currentData[i].key === item.key) {\n            // 切换页码重新计算oldVal\n            this.oldVal.push(this.currentData[i])\n            // 需要打勾的数据\n            currentSelectedData.push(this.currentData[i])\n          }\n        }\n      })\n      this.$nextTick(() => {\n        this.toggleSelection(currentSelectedData)\n      })\n      // 切换行索引\n      this.currentIndex = (this.currentPage - 1) * this.pagination.pageSize + 1\n    },\n    // checkbox触发函数\n    handleSelectionChange(val) {\n      const valKeys = val.map(item => item.key)\n      const oldValKeys = this.oldVal.map(item => item.key)\n      this.selectedTableData = JSON.parse(sessionStorage.getItem('selectedTableData'))\n      // 一条数据都没选中\n      if (this.selectedTableData.length === 0) {\n        this.selectedTableData = this.selectedTableData.concat(val)\n        this.$emit('selection-change', this.selectedTableData)\n        this.oldVal = [...val]\n        sessionStorage.setItem('selectedTableData', JSON.stringify(this.selectedTableData))\n        return\n      }\n      // 判断是选中数据还是取消选中\n      if (valKeys.length < oldValKeys.length) {\n        const delKey = oldValKeys.filter(item => !valKeys.includes(item))\n        this.selectedTableData = this.selectedTableData.filter(item => !delKey.includes(item.key))\n        this.$emit('selection-change', this.selectedTableData)\n      } else {\n        const addKey = valKeys.filter(item => !oldValKeys.includes(item))\n        const addVal = val.filter(item => addKey.includes(item.key))\n        this.selectedTableData = this.selectedTableData.concat(addVal)\n        this.$emit('selection-change', this.selectedTableData)\n      }\n      sessionStorage.setItem('selectedTableData', JSON.stringify(this.selectedTableData))\n      this.oldVal = [...val]\n    },\n    // 拖拽\n    // setDrag() {\n    //   const el = document.querySelectorAll('.el-table__body-wrapper > table > tbody')[0]\n    //   this.rowClassName = 'rowClassName' // 设置行样式，添加移动手势\n    //   this.sortable = Sortable.create(el, {\n    //     setData(dataTransfer) {\n    //       dataTransfer.setData('Text', '')\n    //     },\n    //     onEnd: (evt) => {\n    //       const dragData = [...this.currentData]\n    //       let { oldIndex, newIndex } = evt\n    //       if (this.pagination) {\n    //         oldIndex = evt.oldIndex * this.currentPage\n    //         newIndex = evt.newIndex * this.currentPage\n    //       }\n    //       dragData[oldIndex] = this.currentData[newIndex]\n    //       dragData[newIndex] = this.currentData[oldIndex]\n    //       this.$emit('getDragData', { dragData, oldIndex, newIndex })\n    //     },\n    //   })\n    // },\n    // 导出excel\n    // exportExcel(fileName = 'sheet') {\n    //   const targetTable = this.$XLSX.utils.table_to_book(document.querySelectorAll('.el-table__body-wrapper > table')[0])\n    //   const writeTable = this.$XLSX.write(targetTable, { bookType: 'xlsx', bookSST: true, type: 'array' })\n    //   try {\n    //     FileSaver.saveAs(new Blob([writeTable], { type: 'application/octet-stream' }), `${fileName}.xlsx`)\n    //   } catch (e) { if (typeof console !== 'undefined') console.log(e, writeTable) }\n    //   return writeTable\n    // },\n    // 导出csv\n    // exportCsv(fileName = 'sheet') {\n    //   const targetTable = this.$XLSX.utils.table_to_book(document.querySelectorAll('.el-table__body-wrapper > table')[0])\n    //   const writeTable = this.$XLSX.write(targetTable, { bookType: 'csv', bookSST: true, type: 'array' })\n    //   try {\n    //     FileSaver.saveAs(new Blob([writeTable], { type: 'application/octet-stream' }), `${fileName}.csv`)\n    //   } catch (e) { if (typeof console !== 'undefined') console.log(e, writeTable) }\n    //   return writeTable\n    // },\n  },\n  watch: {\n    fixedLeftList: {\n      handler() {\n        // eslint-disable-line\n        this.filterTableColumn.map((item, index) => {\n          if (this.fixedLeftList.indexOf(item.label) > -1) {\n            this.$set(this.filterTableColumn[index], 'fixed', 'left')\n          } else if (this.fixedRightList.indexOf(item.label) === -1) {\n            this.$set(this.filterTableColumn[index], 'fixed', false)\n          }\n          return ''\n        })\n      },\n      deep: true,\n      immediate: true,\n    },\n    fixedRightList: {\n      handler() {\n        // eslint-disable-line\n        this.filterTableColumn.map((item, index) => {\n          if (this.fixedRightList.indexOf(item.label) > -1) {\n            this.$set(this.filterTableColumn[index], 'fixed', 'right')\n          } else if (this.fixedLeftList.indexOf(item.label) === -1) {\n            this.$set(this.filterTableColumn[index], 'fixed', false)\n          }\n          return ''\n        })\n      },\n      deep: true,\n      immediate: true,\n    },\n    customColumn: {\n      handler(val) {\n        if (val.length > 1) {\n          this.filterTableColumn = this.tableColumn.filter(v => val.indexOf(v.label) > -1)\n        }\n      },\n      deep: true,\n    },\n    tableData: {\n      handler() {\n        // 传了分页配置\n        if (this.pagination && this.pagination.pageSize) {\n          this.currentData = this.tableData.filter((item, index) => index < this.pagination.pageSize)\n        } else {\n          this.currentData = this.tableData\n        }\n      },\n      deep: true,\n      immediate: true,\n    },\n    tableColumn: {\n      handler() {\n        // 如果一开始没有传要展示的列 就默认全展示\n        if (this.customColumn.length > 1) {\n          this.filterTableColumn = this.tableColumn.filter(v => this.customColumn.indexOf(v.label) > -1)\n        } else {\n          this.filterTableColumn = this.tableColumn\n        }\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.lin-table {\n  position: relative;\n}\n\n.sort-input {\n  width: 50px;\n  background: none;\n  justify-content: space-around;\n}\n\n.table-edit {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 135px;\n}\n\n.cell-edit-input .el-input,\n.el-input__inner {\n  width: 125px;\n}\n\n.cell-icon {\n  cursor: pointer;\n  color: #3963bc;\n  margin-left: 5px;\n}\n\n.pagination {\n  display: flex;\n  justify-content: flex-end;\n  margin-right: -10px;\n  margin-top: 15px;\n}\n</style>\n\n<style>\n.lin-table .rowClassName {\n  cursor: move !important;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}